!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("Avalon requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function s(){e.console&&avalon.config.debug&&Function.apply.call(console.log,console,arguments)}function k(e){return Function.apply(T,e)}function T(){}function E(e,t){"string"==typeof e&&(e=e.match(u)||[]);for(var r={},a=void 0!==t?t:1,n=0,i=e.length;i>n;n++)r[e[n]]=a;return r}function _(){if(e.VBArray){var t=document.documentMode;return t?t:e.XMLHttpRequest?7:6}return 0/0}function M(e){return d.test(g.call(e))}function D(e,t){return e=Math.floor(e)||0,0>e?Math.max(t+e,0):Math.min(e,t)}function R(e){if(!e)return!1;var t=e.length;if(t===t>>>0){var r=g.call(e).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(r))return!1;if("Array"===r)return!0;try{return{}.propertyIsEnumerable.call(e,"length")===!1?/^\s?function/.test(e.item||e.callee):!0}catch(a){return!e.window}}return!1}function W(e,t,r){var a="for(var "+e+"i=0,n = this.length; i < n; i++){"+t.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+r;return Function("fn,scope",a)}function X(e,t){try{for(;t=t.parentNode;)if(t===e)return!0;return!1}catch(r){return!1}}function Y(){return(new XMLSerializer).serializeToString(this)}function Z(e,t){if(e&&e.childNodes)for(var i,r=e.childNodes,a=0;i=r[a++];)if(i.tagName){var o=n.createElementNS(G,i.tagName.toLowerCase());y.forEach.call(i.attributes,function(e){o.setAttribute(e.name,e.value)}),Z(i,o),t.appendChild(o)}}function Q(e){var t={};for(var r in e)t[r]=e[r];var a=t.target=e.srcElement;if(0===e.type.indexOf("key"))t.which=null!=e.charCode?e.charCode:e.keyCode;else if(K.test(e.type)){var i=a.ownerDocument||n,o="BackCompat"===i.compatMode?i.body:i.documentElement;t.pageX=e.clientX+(o.scrollLeft>>0)-(o.clientLeft>>0),t.pageY=e.clientY+(o.scrollTop>>0)-(o.clientTop>>0),t.wheelDeltaY=t.wheelDelta,t.wheelDeltaX=0}return t.timeStamp=new Date-0,t.originalEvent=e,t.preventDefault=function(){e.returnValue=!1},t.stopPropagation=function(){e.cancelBubble=!0},t}function at(e){for(var t in e)if(m.call(e,t)){var r=e[t];"function"==typeof at.plugins[t]?at.plugins[t](r):"object"==typeof at[t]?avalon.mix(at[t],r):at[t]=r}return this}function ft(e){return(e+"").replace(ct,"\\$&")}function vt(e,t){var r=this.$events||(this.$events={}),a=r[e]||(r[e]=[]);if("function"==typeof t){var i=t;i.uniqueNumber=Math.random(),t={element:$,type:"user-watcher",handler:T,vmodels:[this],expr:e,uniqueNumber:i.uniqueNumber},t.wildcard=/\*/.test(e)}if(t.update)t.oneTime||avalon.Array.ensure(a,t);else{if(/\w\.*\B/.test(e)){t.getter=T;var o=this;t.update=function(){var e=this.fireArgs||[];e[2]&&t.handler.apply(o,e),delete this.fireArgs},a.sync=!0,avalon.Array.ensure(a,t)}else avalon.injectBinding(t);i&&(t.handler=i)}return function(){t.update=t.getter=t.handler=T,t.element=n.createElement("a")}}function pt(e,t){var r=this.$events;if(r&&r[e]){t&&(t[2]=e);var a=r[e];ht(a,t);var n=this.$up;n&&(this.$pathname&&pt.call(n,this.$pathname+"."+e,t),pt.call(n,"*."+e,t))}else{if(n=this.$up,this.$ups){for(var i in this.$ups)pt.call(this.$ups[i],i+"."+e,t);return}if(n){var o=this.$pathname;""===o&&(o="*");var l=o+"."+e;a=l.split("."),-1===a.indexOf("*")?(pt.call(n,l,t),a[1]="*",pt.call(n,a.join("."),t)):pt.call(n,l,t)}}}function dt(e,t){for(;;){if(e.$watch){var r=e.$events||(e.$events={}),a=r[t]||(r[t]=[]);return void It.collectDependency(a)}if(e=e.$up,!e)break;t=e.$pathname+"."+t}}function ht(e,t){if(e){new Date-Gt>444&&"object"==typeof e[0]&&Qt();for(var i,r=[],a=[],n=0;i=e[n++];)"user-watcher"===i.type?r.push(i):a.push(i);if(at.async){for(Ba.render(),n=0;i=a[n++];)if(i.update){var o=Zt(i);Ba.queue[o]||(Ba.queue[o]=1,Ba.queue.push(i))}}else for(n=0;i=a[n++];)i.update&&i.update();for(n=0;i=r[n++];)(t&&t[2]===i.expr||i.wildcard)&&(i.fireArgs=t),i.update()}}function wt(e,t){return t=t||{},t.watch=!0,Nt(e,t)}function Ct(){}function Nt(e,t){function m(e){return l[e]===!0}if(!e||e.$id&&e.$accessors||e.nodeName&&e.nodeType>0)return e;t=t||f;var r=t.force||f,a=t.old,n=a&&a.$accessors||f,i=new Ct,o={},l={},c=[],u=[],v={};e.$skipArray&&(v=E(e.$skipArray),delete e.$skipArray);var p=e.$computed;if(p){delete e.$computed;for(var d in p)l[d]=!0,function(e,t){var r;o[e]={get:function(){return r=t.get.call(this)},set:function(a){if("function"==typeof t.set){var n=r;t.set.call(this,a);var i=this[e];this.$fire&&i!==n&&this.$fire(e,i,n)}},enumerable:!0,configurable:!0}}(d,p[d])}for(d in e){var h=e[d];gt[d]||(l[d]=!0),"function"==typeof h||h&&h.nodeName&&h.nodeType>0||!r[d]&&("$"===d.charAt(0)||gt[d]||v[d])?c.push(d):kt(h)?(s("warning:计算属性建议放在$computed对象中统一定义"),function(e,t){var r;o[e]={get:function(){return r=t.get.call(this)},set:function(a){if("function"==typeof t.set){var n=r;t.set.call(this,a);var i=this[e];this.$fire&&i!==n&&this.$fire(e,i,n)}},enumerable:!0,configurable:!0}}(d,h)):(u.push(d),o[d]=n[d]?n[d]:Tt(d,h))}o.$model=Mt,i=xt(i,o,e),c.forEach(function(t){i[t]=e[t]}),St(i,"$ups",null),St(i,"$id","anonymous"),St(i,"$up",a?a.$up:null),St(i,"$track",Object.keys(l)),St(i,"$active",!1),St(i,"$pathname",a?a.$pathname:""),St(i,"$accessors",o),St(i,"hasOwnProperty",m),t.watch&&(St(i,"$watch",function(){return vt.apply(i,arguments)}),St(i,"$fire",function(e,t){if(0===e.indexOf("all!")){var r=e.slice(4);for(var a in avalon.vmodels){var n=avalon.vmodels[a];n.$fire&&n.$fire.apply(n,[r,t])}}else pt.call(i,e,[t])})),u.forEach(function(t){var r=a&&a[t],n=i[t]=e[t];n&&"object"==typeof n&&(n.$up=i,n.$pathname=t),pt.call(i,t,[n,r])});for(d in p)h=i[d];return i.$active=!0,i}function kt(e){if(e&&"object"==typeof e){for(var t in e)if("get"!==t&&"set"!==t)return!1;return"function"==typeof e.get}}function Tt(e,t){var r;return t=0/0,{get:function(){return this.$active&&dt(this,e),t},set:function(a){if(t!==a){var n=t;r=Et(a,t),r?t=r:(r=void 0,t=a),Object(r)===r&&(r.$pathname=e,r.$up=this),this.$active&&pt.call(this,e,[t,n])}},enumerable:!0,configurable:!0}}function Et(e,t,r,a){if(Array.isArray(e))return _t(e,t,a);if(avalon.isPlainObject(e)){if(t&&"object"==typeof t){var n=At(e),i=At(t);if(n.join(";")===i.join(";")){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}t.$active=!1}return Nt(e,{old:t,watch:a})}return r?e:void 0}function _t(e,t,r){if(t){var a=[0,t.length].concat(e);return t.splice.apply(t,a),t}for(var n in Pt)e[n]=Pt[n];St(e,"$up",null),St(e,"$pathname",""),St(e,"$track",Bt(e.length)),e._=Nt({length:0/0},{watch:!0}),e._.length=e.length,e._.$watch("length",function(t,r){pt.call(e.$up,e.$pathname+".length",[t,r])}),r&&St(e,"$watch",function(){return vt.apply(e,arguments)}),x?Object.defineProperty(e,"$model",Mt):e.$model=Ot(e);for(var i=0,o=e.length;o>i;i++){var l=e[i]=Et(e[i],0,1,1);Object(l)===l&&(l.$up=e)}return e}function St(e,t,r){bt?Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1,configurable:!0}):e[t]=r}function Ot(e){var t=avalon.type(e);if("array"===t){for(var r=[],a=0;a<e.length;a++)r[a]=Ot(e[a]);return r}if("object"===t){var n={};for(a in e)if("__proxy__"!==a&&"__data__"!==a&&"__const__"!==a&&e.hasOwnProperty(a)){var i=e[a];n[a]=i&&i.nodeType?i:Ot(i)}return n}return e}function Lt(e,t,r,a){var n=t[r];return 4!==arguments.length?n.get.call(e):void n.set.call(e,a)}function Rt(e,t){for(var r={},a=0,n=t.length;n>a;a++){r[a]=e[a];var i=t[a];i in r?(e[a]=r[i],delete r[i]):e[a]=e[i]}}function Bt(e){for(var t=[],r=0;e>r;r++)t[r]=A("$proxy$each");return t}function qt(e,t,r){switch(t){case"push":case"unshift":r=Bt(r.length);break;case"splice":if(r.length>2){{r[1],r.length-2}r=[r[0],r[1]].concat(Bt(r.length-2))}}Array.prototype[t].apply(e,r)}function zt(e,t){t.oneTime||e&&avalon.Array.ensure(e,t)&&t.element&&(Kt(t,e),new Date-Gt>444&&Qt())}function Wt(e,t){for(var n,r=[],a=0;n=e[a++];)r.push(t?n.$id:n.$key);return r.join(";")}function Zt(e){if(!e.uniqueNumber){var t=e.element;e.uniqueNumber=t?1!==t.nodeType?e.type+"-"+Zt(t.parentNode)+"-"+ ++Xt:e.name+"-"+Zt(t):++Xt}return e.uniqueNumber}function Kt(e,t){var r=e.lists||(e.lists=[]),a=Zt(e);avalon.Array.ensure(r,t),t.$uuid=t.$uuid||A(),Yt[a]||(Yt[a]=1,Yt.push(e))}function Qt(e){for(var t=Yt.length,r=t,a=[],n={},i={};e=Yt[--t];){var o=e.type;i[o]?i[o]++:(i[o]=1,a.push(o))}var l=!1;if(a.forEach(function(e){Jt[e]!==i[e]&&(n[e]=1,l=!0)}),t=r,l)for(;e=Yt[--t];)if(null!==e.element){if(n[e.type]&&tr(e.element)){Yt.splice(t,1),delete Yt[e.uniqueNumber];for(var f,s=e.lists,c=0;f=s[c++];)avalon.Array.remove(s,f),avalon.Array.remove(f,e);er(e)}}else Yt.splice(t,1);Jt=i,Gt=new Date}function er(e){delete Yt[e.uniqueNumber],e.element=null,e.rollback&&e.rollback();for(var t in e)e[t]=null}function tr(e){try{{e.parentNode.nodeType}}catch(r){return!0}return e.ifRemove&&!$.contains(e.ifRemove)&&o===e.parentNode?(e.parentNode&&e.parentNode.removeChild(e),!0):e.msRetain?0:1===e.nodeType?!$.contains(e):!avalon.contains($,e)}function fr(e){var t=e.nodeName;return t.toLowerCase()===t&&e.scopeName&&""===e.outerText}function ur(e){"url(#default#VML)"!==e.currentStyle.behavior&&(e.style.behavior="url(#default#VML)",e.style.display="inline-block",e.style.zoom=1)}function vr(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function pr(e){return!e||e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}function hr(e){if(!("classList"in e)){e.classList={node:e};for(var t in dr)e.classList[t.slice(1)]=dr[t]}return e.classList}function mr(e){try{if("object"==typeof e)return e;e="true"===e?!0:"false"===e?!1:"null"===e?null:+e+""===e?+e:gr.test(e)?avalon.parseJSON(e):e}catch(t){}return e}function wr(e){return e.window&&e.document?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}function Lr(e,t){if(e.offsetWidth<=0){if(jr.test(Cr["@:get"](e,"display"))){var r={node:e};for(var a in Mr)r[a]=e.style[a],e.style[a]=Mr[a];t.push(r)}var n=e.parentNode;n&&1===n.nodeType&&Lr(n,t)}}function Dr(e){var t=e.tagName.toLowerCase();return"input"===t&&/checkbox|radio/.test(e.type)?"checked":t}function Ir(e,t){var r=[],a=!!t;t=t||0;for(var n="unknown",i="",o=0;o<e.length;o++){var l=e.charAt(o);if("'"===l||'"'===l)"unknown"===n?n=l:n===l&&(n="unknown");else if("\\"===l)("'"===n||'"'===n)&&o++;else if(Br.test(l))"unknown"===n?(n="variable",i=l):"maybePath"===n?(i=r.pop(),i+="."+l,n="variable"):"variable"===n&&(i+=l);else if(/\w/.test(l))"variable"===n&&(i+=l);else if("."===l)"variable"===n&&i&&(r.push(i),i="",n="maybePath");else if("["===l){if("variable"===n||"maybePath"===n){i&&(r.push(i),i="");var s=r.length,c=r[s-1],f=Ir(e.slice(o),o);if(f.length)r[s-1]=c+".*",r=f.concat(r);else{var u=e.slice(o+1,f.i);try{var v=k(["return "+u])();r[s-1]=c+"."+v}catch(p){}}n="maybePath",o=f.i}}else if("]"===l){if(a)return r.i=o+t,Vr(r,i),r}else qr.test(l)&&"\r"!==l&&"\n"!==l?"variable"===n&&(Vr(r,i)&&(n="maybePath"),i=""):(Vr(r,i),n="unknown",i="")}return Vr(r,i),r}function Vr(e,t){return t&&!Fr[t]?(e.push(t),!0):void 0}function Ur(e,t,r,a){for(var l,n=[],i=" = "+r+".",o=e.length;l=e[--o];)for(var c,s=l.split("."),f=s[0];c=s.shift();)t.hasOwnProperty(c)&&(n.push(f+i+f),a.observers.push({v:t,p:l}),e.splice(o,1));return n}function Yr(e){e=e.trim();var t=Wr.get(e);if(t)return t.concat();for(var o,r=Ir(e),a={},n=[],i=0;o=r[i++];)a[o]||(a[o]=1,n.push(o));return Wr.put(e,n).concat()}function Gr(e,t,r){var a=r.filters;"string"==typeof a&&a.trim()&&!r._filters&&(r._filters=ra(a.trim()));var n=Yr(e),i=new Date-0,o=[],l=[],s=[];r.observers=[];for(var c=0,f=t.length;f>c;c++)if(n.length){var u="vm"+i+"_"+c;l.push(u),s.push(t[c]),o.push.apply(o,Ur(n,t[c],u,r))}r.args=s;var v=r.type,p=t.map(function(e){return String(e.$id).replace(zr,"$1")})+e+v,d=Xr.get(p);if(d){if("duplex"===v){var h=Xr.get(p+"setter");r.setter=h.apply(h,r.args)}return r.getter=d}if(o.length||o.push("fix"+i),"duplex"===v){var m={};o.forEach(function(e){var t=e.split("=");m[t[0].trim()]=t[1].trim()}),e=e.replace(/[\$\w]+/,function(e){return m[e]?m[e]:e});var g=k(l.concat("'use strict';return function(vvv){"+e+" = vvv\n}\n"));Xr.put(p+"setter",g),r.setter=g.apply(g,r.args)}if("on"===v){-1===e.indexOf("(")?e+=".call(this, $event)":e=e.replace("(",".call(this,"),l.push("$event"),e="\nreturn "+e+";";var y=e.lastIndexOf("\nreturn"),b=e.slice(0,y),x=e.slice(y);e=b+"\n"+x}else e="\nreturn "+e+";";return d=k(l.concat("'use strict';\nvar "+o.join(",\n")+e)),Xr.put(p,d)}function Jr(e){var t=ot.test(e);if(t){var r=Pa(e);return 1===r.length?r[0].expr:r.map(function(e){return e.type?"("+e.expr+")":na(e.expr)}).join(" + ")}return e}function ra(e){return e=e.replace(Zr,"").replace(Kr,function(){return"],|"}).replace(Qr,function(e,t){return"["+na(t)}).replace(ea,function(){return'"],["'}).replace(ta,function(){return'",'})+"]",k(["return ["+e+"]"])()}function oa(e,t,r){var a=setTimeout(function(){var n=e.innerHTML;clearTimeout(a),n===r?t():oa(e,t,n)})}function la(e,t){var r=e.getAttribute("avalonctrl")||t.$id;e.setAttribute("avalonctrl",r),t.$events&&(t.$events.expr=e.tagName+'[avalonctrl="'+r+'"]')}function ca(e,t){for(var a,r=0;a=e[r++];)a.vmodels=t,F[a.type].init(a),avalon.injectBinding(a),a.getter&&1===a.element.nodeType&&a.element.removeAttribute(a.name);e.length=0}function ha(e,t){return e.priority-t.priority}function ya(e,t){for(var i,r=e.attributes,a={},n=0;i=r[n++];){var o=i.name;if(i.specified&&!ma.test(o)){var l=pr(i.name);a[l]=/^on\-[\w-]+$/.test(o)?sa(e,o,t):mr(i.value)}}return a}function ba(e,t,r){var a=!0;if(t.length){for(var c,n=Ea?Ea(e):e.attributes,i=[],o={},l=0;c=n[l++];){var f=c.name;if(!o[f]&&(o[f]=1,c.specified&&(r=f.match(va)))){var u=r[1],v=r[2]||"",p=c.value;if(pa[u]?(v=u,u="on"):da[u]&&(v=u,u="attr",f="ms-"+u+"-"+v,s("warning!请改用"+f+"代替"+c.name+"!")),F[u]){var d=p.replace(ua,""),h=p!==d,m={type:u,param:v,element:e,name:f,expr:d,oneTime:h,uniqueNumber:c.name+"-"+Zt(e),priority:(F[u].priority||10*u.charCodeAt(0))+(Number(v.replace(/\D/g,""))||0)};if("html"===u||"text"===u){var g=Ha(p).filters;m.expr=m.expr.replace(g,""),m.filters=g.replace(Oa,function(){return m.type="html",m.group=1,""}).trim()}else if("duplex"===u)var y=f;else if("ms-if-loop"===f)m.priority+=100;else if("ms-attr-value"===f)var b=f;i.push(m)}}}if(i.length){for(i.sort(ha),y&&b&&"INPUT"===e.nodeName&&"text"===e.type&&s("warning!一个控件不能同时定义ms-attr-value与"+y),l=0;m=i[l];l++){if(u=m.type,xa.test(u))return ca(i.slice(0,l+1),t);a&&(a=!$a.test(u))}ca(i,t)}}a&&!ia[e.tagName]&&(za(e)?e.msResolved:1)&&(fa&&fa(e),Aa(e,t))}function Aa(e,t){var r=avalon.slice(e.childNodes);_a(r,t)}function _a(e,t){for(var a,r=0;a=e[r++];)switch(a.nodeType){case 1:var n=a;if(!n.msResolved&&n.parentNode&&1===n.parentNode.nodeType){var i=za(n);if(i){var o=n.localName?n.localName.replace(i+":",""):n.nodeName,l=i+":"+pr(o);qa.push({library:i,element:n,fullName:l,widget:o,vmodels:t,name:"widget"}),avalon.components[l]&&!function(e){setTimeout(function(){avalon.component(e)})}(l)}}Sa(a,t),a.msHasEvent&&avalon.fireDom(a,"datasetchanged",{bubble:a.msHasEvent});break;case 3:ot.test(a.nodeValue)&&Fa(a,t,r)}}function Sa(e,t,r){var a=e.getAttribute("ms-skip");if(!e.getAttributeNode)return s("warning "+e.tagName+" no getAttributeNode method");var n=e.getAttributeNode("ms-important"),i=e.getAttributeNode("ms-controller");if("string"!=typeof a){if(r=n||i){var o=avalon.vmodels[r.value];if(!o)return;t=r===n?[o]:[o].concat(t);var l=r.name;e.removeAttribute(l),avalon(e).removeClass(l),la(e,o)}ba(e,t),o&&setTimeout(function(){o.$fire("ms-scan-end",e)})}}function Ha(e){if(e.indexOf("|")>0){var t=e.replace(Da,function(e){return Array(e.length+1).join("1")}),r=t.replace(Ma,"ᄢ㍄").indexOf("|");if(r>-1)return{type:"text",filters:e.slice(r).trim(),expr:e.slice(0,r)}}return{type:"text",expr:e,filters:""}}function Pa(e){for(var r,n,t=[],a=0;;){if(n=e.indexOf(nt,a),-1===n)break;if(r=e.slice(a,n),r&&t.push({expr:r}),a=n+nt.length,n=e.indexOf(it,a),-1===n)break;r=e.slice(a,n),r&&t.push(Ha(r,a)),a=n+it.length}return r=e.slice(a),r&&t.push({expr:r}),t}function Fa(e,t,r){var a=[],i=Pa(e.data);if(i.length){for(var l,o=0;l=i[o++];){var s=n.createTextNode(l.expr);l.type&&(l.expr=l.expr.replace(ua,function(){return l.oneTime=!0,""}),l.element=s,l.filters=l.filters.replace(Oa,function(){return l.type="html",""}),l.pos=1e3*r+o,a.push(l)),w.appendChild(s)}e.parentNode.replaceChild(w,e),a.length&&ca(a,t)}}function Ua(e,t){if(t)for(var a,r=0;a=e[r++];)if(a.hasOwnProperty(t)&&"object"==typeof a[t]){var n=a[t];return n.$model||n}return{}}function za(e){if(e.scopeName&&"HTML"!==e.scopeName)return e.scopeName;var t=e.nodeName.toLowerCase(),r=t.indexOf(":");return r>0?t.slice(0,r):void 0}function tn(e){return null==e?"":e}function rn(e,t,r){return t.param.replace(v,function(a){var n=avalon.duplexHooks[a];n&&"function"==typeof n[r]&&(e=n[r](e,t))}),e}function on(){for(var e=nn.length-1;e>=0;e--){var t=nn[e];t()===!1&&nn.splice(e,1)}nn.length||clearInterval(an)}function sn(e){var t=0/0,r=0/0;if(e.setSelectionRange)t=e.selectionStart,r=e.selectionEnd;else if(document.selection&&document.selection.createRange){var a=document.selection.createRange();t=0-a.duplicate().moveStart("character",-1e5),r=t+a.text.length}return{start:t,end:r}}function cn(e,t,r){if(e.value&&!e.readOnly)if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",t),a.select()}else e.selectionStart=t,e.selectionEnd=r}function gn(e,t){if(!e||1!==e.nodeType)return null;if(t)var r=t.effectName,a=t.effectDriver;else r=e.getAttribute("data-effect-name"),a=e.getAttribute("data-effect-driver");if(!r||!a)return null;var n=mn.pop()||new $n;return n.el=e,n.driver=a,n.useCss="j"!==a,n.useCss&&(t&&avalon(e).addClass(t.effectClass),n.cssEvent="t"===a?vn:pn),n.name=r,n.callbacks=avalon.effects[r]||{},n}function yn(e,t){var r=e.getAttribute("data-effect-name");if(r){t.effectName=r,t.effectDriver=e.getAttribute("data-effect-driver");var a=+e.getAttribute("data-effect-stagger");t.effectLeaveStagger=+e.getAttribute("data-effect-leave-stagger")||a,t.effectEnterStagger=+e.getAttribute("data-effect-enter-stagger")||a,t.effectClass=e.className||0/0}}function bn(e){return e.replace(/^[\S]/g,function(e){return e.toUpperCase()})}function $n(){}function wn(e,t){var r=e.callbacks[t+"Class"];return"string"==typeof r?r:"function"==typeof r?r():e.name+"-"+t}function Cn(e,t,r){var a=e.callbacks[t];a&&a.call(e,e.el,r)}function _n(e,t,r){var a=e.templateCache&&e.templateCache[t];if(a){for(var o,i=n.createDocumentFragment();o=a.firstChild;)i.appendChild(o);return i}return avalon.parseHTML(r)}function Sn(e){for(var t=n.createDocumentFragment(),r=0,a=e.length;a>r;r++)t.appendChild(e[r]);return t}function jn(e,t,r){for(var n,a=0;n=e[a++];)n.className===r.effectClass&&avalon.effect.apply(n,t,T,T,r)}function Ln(e,t,r){return e?setTimeout(t,++r*e):t(),r}function Dn(e,t){for(var r=w.cloneNode(!1),a=e,n=a.nodeValue,i=t&&Math.max(+t.staggerIndex,0),o=avalon.slice(a.parentNode.childNodes),l=o.indexOf(a);;){var s=o[--l];if(!s||0===String(s.nodeValue).indexOf(n))break;t&&s.className===t.effectClass?(e=s,function(e){t.staggerIndex=Ln(t.effectLeaveStagger,function(){avalon.effect.apply(e,0,T,function(){r.appendChild(e)},t)},i)}(s)):r.insertBefore(s,r.firstChild)}return r.appendChild(a),r}function Hn(e,t,r,a,n){var i=e.template.cloneNode(!0),o=avalon.slice(i.childNodes);i.appendChild(r.$anchor),n&&t.appendChild(i);var l=[r].concat(e.vmodels),s={nodes:o,vmodels:l,content:i};a.push(s)}function Pn(e){var t="object"===e.xtype?Vn:Rn,r=t(e),a=r.$anchor||(r.$anchor=e.element.cloneNode(!1));return a.nodeValue=e.signature,r.$outer=e.$outer,r}function Rn(e,t){for(var r=e.param||"el",a=0,n=Fn.length;n>a;a++){var i=Fn[a];if(i&&i.hasOwnProperty(r)){Fn.splice(a,1),t=i;break}}return t||(t=Bn(r)),t}function Bn(e){var t={$outer:{},$index:0,$oldIndex:0,$anchor:null,$first:!1,$last:!1,$remove:avalon.noop};t[e]=0/0;var r={$last:1,$first:1,$index:1};r[e]=1;var a=wt(t,{force:r});return a.$id=A("$proxy$each"),a}function qn(e,t,r){if("array"===r){e.$remove=function(){t.$repeat.removeAt(e.$index)};var a=t.param;e.$watch(a,function(r){var a=e.$index;t.$repeat[a]=r})}else e.$watch("$val",function(r){t.$repeat[e.$key]=r})}function Vn(){return In.pop()||Un()}function Un(){var e=wt({$key:"",$val:0/0,$index:0,$oldIndex:0,$outer:{},$anchor:null},{force:{$key:1,$val:1,$index:1}});return e.$id=A("$proxy$with"),e}function zn(e,t,r){var a=e[t];if(a){var n=0===a.$id.indexOf("$proxy$each")?Fn:In;a.$outer={};for(var i in a.$events){var o=a.$events[i];Array.isArray(o)&&(o.length=0,i===r?a[r]=0/0:"$val"===i&&(a.$val=0/0))}n.unshift(a)>at.maxRepeatSize&&n.pop(),delete e[t]}}function Wn(e,t){var r="_"+e;if(!Wn[r]){var a=n.createElement(e);$.appendChild(a),t=x?getComputedStyle(a,null).display:a.currentStyle.display,$.removeChild(a),Wn[r]=t}return Wn[r]}function Qn(e,t,r,a){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+e)?+e:0,i=isFinite(+t)?Math.abs(t):3,o=a||",",l=r||".",s="",c=function(e,t){var r=Math.pow(10,t);return""+(Math.round(e*r)/r).toFixed(t)};return s=(i?c(n,i):""+Math.round(n)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(s[1]||"").length<i&&(s[1]=s[1]||"",s[1]+=new Array(i-s[1].length+1).join("0")),s.join(l)}function si(){try{$.doScroll("left"),li()}catch(e){setTimeout(si)}}var r=new Date-0,n=e.document,i=n.getElementsByTagName("head")[0],o=i.insertBefore(document.createElement("avalon"),i.firstChild);o.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>",o.setAttribute("ms-skip","1"),o.className="avalonHide";var l=/\[native code\]/,c="$"+r,f={},u=/[^, ]+/g,v=/\w+/g,p=/^\[object SVG\w*Element\]$/,d=/^\[object (?:Window|DOMWindow|global)\]$/,h=Object.prototype,m=h.hasOwnProperty,g=h.toString,y=Array.prototype,b=y.slice,x=e.dispatchEvent,$=n.documentElement,w=n.createDocumentFragment(),C=n.createElement("div"),N={};"Boolean Number String Function Array Date RegExp Object Error".replace(u,function(e){N["[object "+e+"]"]=e.toLowerCase()});var A=function(e){return e=e||"avalon",String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)},S=_();avalon=function(e){return new avalon.init(e)},avalon.nextTick=new function(){function n(){for(var e=a.length,t=0;e>t;t++)a[t]();a=a.slice(e)}var t=e.setImmediate,r=e.MutationObserver;if(t)return t.bind(e);var a=[];if(r){var i=document.createTextNode("avalon");new r(n).observe(i,{characterData:!0});var o=!1;return function(e){a.push(e),o=!o,i.data=o}}return function(e){setTimeout(e,4)}},avalon.init=function(e){this[0]=this.element=e},avalon.fn=avalon.prototype=avalon.init.prototype,avalon.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?N[g.call(e)]||"object":typeof e};var O="object"==typeof alert?function(e){try{return/^\s*\bfunction\b/.test(e+"")}catch(t){return!1}}:function(e){return"[object Function]"===g.call(e)};avalon.isFunction=O,avalon.isWindow=function(e){return e?e==e.document&&e.document!=e:!1},M(e)&&(avalon.isWindow=M);var j;for(j in avalon({}))break;var L="0"!==j;avalon.isPlainObject=function(e,t){if(!e||"object"!==avalon.type(e)||e.nodeType||avalon.isWindow(e))return!1;try{if(e.constructor&&!m.call(e,"constructor")&&!m.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(L)for(t in e)return m.call(e,t);for(t in e);return void 0===t||m.call(e,t)},l.test(Object.getPrototypeOf)&&(avalon.isPlainObject=function(e){return"[object Object]"===g.call(e)&&Object.getPrototypeOf(e)===h}),avalon.mix=avalon.fn.mix=function(){var e,t,r,a,n,i,o=arguments[0]||{},l=1,s=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},l++),"object"==typeof o||O(o)||(o={}),l===s&&(o=this,l--);s>l;l++)if(null!=(e=arguments[l]))for(t in e){r=o[t];try{a=e[t]}catch(f){continue}o!==a&&(c&&a&&(avalon.isPlainObject(a)||(n=Array.isArray(a)))?(n?(n=!1,i=r&&Array.isArray(r)?r:[]):i=r&&avalon.isPlainObject(r)?r:{},o[t]=avalon.mix(c,i,a)):void 0!==a&&(o[t]=a))}return o},avalon.mix({rword:u,subscribers:c,version:1.55,ui:{},log:s,slice:x?function(e,t,r){return b.call(e,t,r)}:function(e,t,r){var a=[],n=e.length;if(void 0===r&&(r=n),"number"==typeof r&&isFinite(r)){t=D(t,n),r=D(r,n);for(var i=t;r>i;++i)a[i-t]=e[i]}return a},noop:T,error:function(e,t){throw(t||Error)(e)},oneObject:E,range:function(e,t,r){r||(r=1),null==t&&(t=e||0,e=0);for(var a=-1,n=Math.max(0,Math.ceil((t-e)/r)),i=new Array(n);++a<n;)i[a]=e,e+=r;return i},eventHooks:{},bind:function(e,t,r,a){var n=avalon.eventHooks,i=n[t];"object"==typeof i&&(t=i.type||t,a=i.phase||!!a,r=i.fn?i.fn(e,r):r);var o=x?r:function(t){r.call(e,Q(t))};return x?e.addEventListener(t,o,a):e.attachEvent("on"+t,o),o},unbind:function(e,t,r,a){var n=avalon.eventHooks,i=n[t],o=r||T;"object"==typeof i&&(t=i.type||t,a=i.phase||!!a),x?e.removeEventListener(t,o,a):e.detachEvent("on"+t,o)},css:function(e,t,r){e instanceof avalon&&(e=e[0]);var n,a=/[_-]/.test(t)?pr(t):t;if(t=avalon.cssName(a)||a,void 0===r||"boolean"==typeof r){n=Cr[a+":get"]||Cr["@:get"],"background"===t&&(t="backgroundColor");var i=n(e,t);return r===!0?parseFloat(i)||0:i}if(""===r)e.style[t]="";else{if(null==r||r!==r)return;isFinite(r)&&!avalon.cssNumber[a]&&(r+="px"),n=Cr[a+":set"]||Cr["@:set"],n(e,t,r)}},each:function(e,t){if(e){var r=0;if(R(e))for(var a=e.length;a>r&&t(r,e[r])!==!1;r++);else for(r in e)if(e.hasOwnProperty(r)&&t(r,e[r])===!1)break}},getWidgetData:function(e,t){var r=avalon(e).data(),a={};for(var n in r)0===n.indexOf(t)&&(a[n.replace(t,"").replace(/\w/,function(e){return e.toLowerCase()})]=r[n]);return a},Array:{ensure:function(e,t){return-1===e.indexOf(t)?e.push(t):void 0},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var r=e.indexOf(t);return~r?avalon.Array.removeAt(e,r):!1}}});var H=avalon.bindingHandlers={},P=avalon.bindingExecutors={},F=avalon.directives={};avalon.directive=function(e,t){return H[e]=t.init=t.init||T,P[e]=t.update=t.update||T,F[e]=t};var B=new function(){function e(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var t=e.prototype;return t.put=function(e,t){var r={key:e,value:t};return this._keymap[e]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size===this.limit?this.shift():this.size++,t},t.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0,delete this._keymap[e.key])},t.get=function(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t,t.value)},e};if(!"司徒正美".trim){var q=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(q,"")}}var I=!{toString:null}.propertyIsEnumerable("toString"),V=function(){}.propertyIsEnumerable("prototype"),U=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],z=U.length;if(Object.keys||(Object.keys=function(e){var t=[],r=V&&"function"==typeof e;if("string"==typeof e||e&&e.callee)for(var a=0;a<e.length;++a)t.push(String(a));else for(var n in e)r&&"prototype"===n||!m.call(e,n)||t.push(String(n));if(I)for(var i=e.constructor,o=i&&i.prototype===e,l=0;z>l;l++){var s=U[l];o&&"constructor"===s||!m.call(e,s)||t.push(s)}return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===g.call(e)}),T.bind||(Function.prototype.bind=function(e){if(arguments.length<2&&void 0===e)return this;var t=this,r=arguments;return function(){var n,a=[];for(n=1;n<r.length;n++)a.push(r[n]);for(n=0;n<arguments.length;n++)a.push(arguments[n]);return t.apply(e,a)}}),l.test([].map)||avalon.mix(y,{indexOf:function(e,t){var r=this.length,a=~~t;for(0>a&&(a+=r);r>a;a++)if(this[a]===e)return a;return-1},lastIndexOf:function(e,t){var r=this.length,a=null==t?r-1:t;for(0>a&&(a=Math.max(0,r+a));a>=0;a--)if(this[a]===e)return a;return-1},forEach:W("","_",""),filter:W("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:W("r=[],","r[i]=_","return r"),some:W("","if(_)return true","return false"),every:W("","if(!_)return false","return true")}),avalon.contains=X,n.contains||(n.contains=function(e){return X(n,e)}),e.SVGElement){n.createTextNode("x").contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))});var G="http://www.w3.org/2000/svg",J=n.createElementNS(G,"svg");J.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />',p.test(J.firstChild)||Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:Y,set:function(e){var t=this.tagName.toLowerCase(),r=this.parentNode,a=avalon.parseHTML(e);if("svg"===t)r.insertBefore(a,this);else{var i=n.createDocumentFragment();Z(a,i),r.insertBefore(i,this)}r.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),r=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(r,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);Z(t,this)}}}})}!$.outerHTML&&e.HTMLElement&&HTMLElement.prototype.__defineGetter__("outerHTML",Y);var K=/^(?:mouse|contextmenu|drag)|click/,et=avalon.eventHooks;if("onmouseenter"in $||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){et[e]={type:t,fn:function(t,r){return function(a){var n=a.relatedTarget;return n&&(n===t||16&t.compareDocumentPosition(n))?void 0:(delete a.type,a.type=e,r.call(t,a))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(t,r){e[t]&&!et.animationend&&(et.animationend={type:r})}),"oninput"in n.createElement("input")||(et.input={type:"propertychange",deel:function(e,t){return function(r){return"value"===r.propertyName?(r.type="input",t.call(e,r)):void 0}}}),void 0===n.onmousewheel){var tt=void 0!==n.onwheel?"wheel":"DOMMouseScroll",rt="wheel"===tt?"deltaY":"detail";et.mousewheel={type:tt,fn:function(e,t){return function(r){r.wheelDeltaY=r.wheelDelta=r[rt]>0?-120:120,r.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(r,"type",{value:"mousewheel"}),t.call(e,r)}}}}var nt,it,ot,lt,st,ct=/[-.*+?^${}()|[\]\/\\]/g,ut={interpolate:function(e){if(nt=e[0],it=e[1],nt===it){throw new SyntaxError("openTag!==closeTag")}at.openTag=nt,at.closeTag=it;var r=ft(nt),a=ft(it);ot=new RegExp(r+"(.*?)"+a),lt=new RegExp(r+"(.*?)"+a,"g"),st=new RegExp(r+".*?"+a+"|\\sms-")}};at.async=!0,at.debug=!0,at.plugins=ut,at.plugins.interpolate(["{{","}}"]),at.paths={},at.shim={},at.maxRepeatSize=100,avalon.config=at;var mt=avalon.vmodels={};avalon.define=function(e){var t=e.$id;t||s("warning: vm必须指定$id");var r=wt(e);return r.$id=t,mt[t]=r};var gt=E("$id,$watch,$fire,$events,$model,$skipArray,$active,$pathname,$up,$track,$accessors,$ups"),yt=Object.defineProperty,bt=!0;try{yt({},"_",{value:"x"});var xt=Object.defineProperties}catch($t){bt=!1}var At=l.test(Object.key)?Object.key:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&!gt[r]&&t.push(r);return t},Mt={get:function(){return Ot(this)},set:T,enumerable:!1,configurable:!0};if(!bt&&("__defineGetter__"in avalon&&(yt=function(e,t,r){return"value"in r&&(e[t]=r.value),"get"in r&&e.__defineGetter__(t,r.get),"set"in r&&e.__defineSetter__(t,r.set),e},xt=function(e,t){for(var r in t)t.hasOwnProperty(r)&&yt(e,r,t[r]);return e}),S)){var jt={};e.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),xt=function(t,a,n){var i=[];i.push("\r\n	Private [__data__], [__proxy__]","	Public Default Function [__const__](d"+r+", p"+r+")","		Set [__data__] = d"+r+": set [__proxy__] = p"+r,"		Set [__const__] = Me","	End Function");var o={};for(t in a)o[t]=!0,i.push("	Public Property Let ["+t+"](val"+r+")",'		Call [__proxy__](Me,[__data__], "'+t+'", val'+r+")","	End Property","	Public Property Set ["+t+"](val"+r+")",'		Call [__proxy__](Me,[__data__], "'+t+'", val'+r+")","	End Property","	Public Property Get ["+t+"]","	On Error Resume Next","		Set["+t+'] = [__proxy__](Me,[__data__],"'+t+'")',"	If Err.Number <> 0 Then","		["+t+'] = [__proxy__](Me,[__data__],"'+t+'")',"	End If","	On Error Goto 0","	End Property");
for(t in n)o[t]!==!0&&(o[t]=!0,i.push("	Public ["+t+"]"));for(t in gt)o[t]!==!0&&(o[t]=!0,i.push("	Public ["+t+"]"));i.push("	Public [hasOwnProperty]"),i.push("End Class");var l=i.join("\r\n"),s=jt[l];s||(s=A("VBClass"),e.parseVB("Class "+s+l),e.parseVB(["Function "+s+"Factory(a, b)","	Dim o","	Set o = (New "+s+")(a, b)","	Set "+s+"Factory = o","End Function"].join("\r\n")),jt[l]=s);var c=e[s+"Factory"](a,Lt);return c}}var Dt=["push","pop","shift","unshift","splice"],Ht=Array.prototype,Pt={notify:function(){pt.call(this.$up,this.$pathname)},set:function(e,t){if(e>>>0===e&&this[e]!==t){if(e>this.length)throw Error(e+"set方法的第一个参数不能大于原数组长度");pt.call(this.$up,this.$pathname+".*",[t,this[e]]),this.splice(e,1,t)}},contains:function(e){return-1!==this.indexOf(e)},ensure:function(e){return this.contains(e)||this.push(e),this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>>>0===e?this.splice(e,1):[]},size:function(){return this._.length},removeAll:function(e){if(Array.isArray(e))for(var t=this.length-1;t>=0;t--)-1!==e.indexOf(this[t])&&(Ft.call(this.$track,t,1),Ft.call(this,t,1));else if("function"==typeof e)for(t=this.length-1;t>=0;t--){var r=this[t];e(r,t)&&(Ft.call(this.$track,t,1),Ft.call(this,t,1))}else Ft.call(this.$track,0,this.length),Ft.call(this,0,this.length);x||(this.$model=Ot(this)),this.notify(),this._.length=this.length},clear:function(){return this.removeAll()}},Ft=Ht.splice;Dt.forEach(function(e){var t=Ht[e];Pt[e]=function(){for(var r=[],a=0,n=arguments.length;n>a;a++)r[a]=Et(arguments[a],0,1,1);var i=t.apply(this,r);return qt(this.$track,e,r),x||(this.$model=Ot(this)),this.notify(),this._.length=this.length,i}}),"sort,reverse".replace(u,function(e){Pt[e]=function(){var t=this.concat(),r=this,a=Math.random(),n=[],i=!1;Ht[e].apply(r,arguments);for(var o=0,l=t.length;l>o;o++){var s=r[o],c=t[o];if(s===c)n.push(o);else{var f=t.indexOf(s);n.push(f),t[f]=a,i=!0}}return i&&(Rt(this.$track,n),x||(this.$model=Ot(this)),this.notify()),this}});var It=function(){var t,e=[];return{begin:function(r){e.push(t),t=r},end:function(){t=e.pop()},collectDependency:function(e){t&&t.callback(e)}}}();avalon.injectBinding=function(e){e.handler=e.handler||F[e.type].update||T,e.update=function(){var t=!1;e.getter||(t=!0,It.begin({callback:function(t){zt(t,e)}}),e.getter=Gr(e.expr,e.vmodels,e),e.observers.forEach(function(t){t.v.$watch(t.p,e)}),delete e.observers);try{var a,n,r=e.fireArgs;if(delete e.fireArgs,r?(a=r[0],n=r[1]):a="on"===e.type?e.getter+"":e.getter.apply(0,e.args),n="undefined"==typeof n?e.oldValue:n,e._filters&&(a=ei.$filter.apply(0,[a].concat(e._filters))),e.signature){var i=avalon.type(a);if("array"!==i&&"object"!==i)throw Error("warning:"+e.expr+"只能是对象或数组");e.xtype=i;var o=Wt(e.proxies||[],i),l=a.$track||("array"===i?Bt(a.length):Object.keys(a));e.track=l,o!==l.join(";")&&(e.handler(a,n),e.oldValue=1)}else(Array.isArray(a)?a.length===(n&&n.length):1)?"oldValue"in e&&a===n||(e.handler(a,n),e.oldValue=a):(e.handler(a,n),e.oldValue=a.concat())}catch(c){delete e.getter,s("warning:exception throwed in [avalon.injectBinding] ",c);var f=e.element;f&&3===f.nodeType&&(f.nodeValue=nt+(e.oneTime?"::":"")+e.expr+it)}finally{t&&It.end()}},e.update()};var Xt=0,Yt=avalon.$$subscribers=[],Gt=new Date,Jt={},rr={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:x?[0,"",""]:[1,"X<div>","</div>"]};rr.th=rr.td,rr.optgroup=rr.option,rr.tbody=rr.tfoot=rr.colgroup=rr.caption=rr.thead,String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(u,function(e){rr[e]=rr.g});var ar=/<([\w:]+)/,nr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ir=x?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/gi,or=E(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]),lr=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/,sr=n.createElement("script"),cr=/<|&#?\w+;/;avalon.parseHTML=function(e){var t=w.cloneNode(!1);if("string"!=typeof e)return t;if(!cr.test(e))return t.appendChild(n.createTextNode(e)),t;e=e.replace(nr,"<$1></$2>").trim();var o,l,r=(ar.exec(e)||["",""])[1].toLowerCase(),a=rr[r]||rr._default,i=C;x||(e=e.replace(ir,"<br class=msNoScope>$1")),i.innerHTML=a[1]+e+a[2];var s=i.getElementsByTagName("script");if(s.length)for(var f,c=0;f=s[c++];)or[f.type]&&(l=sr.cloneNode(!1),y.forEach.call(f.attributes,function(e){e&&e.specified&&(l[e.name]=e.value,l.setAttribute(e.name,e.value))}),l.text=f.text,f.parentNode.replaceChild(l,f));if(!x){var u="X<div>"===a[1]?i.lastChild.firstChild:i.lastChild;if(u&&"TABLE"===u.tagName&&"tbody"!==r)for(s=u.childNodes,c=0;f=s[c++];)if("TBODY"===f.tagName&&!f.innerHTML){u.removeChild(f);break}s=i.getElementsByTagName("br");for(var v=s.length;f=s[--v];)"msNoScope"===f.className&&f.parentNode.removeChild(f);for(s=i.all,c=0;f=s[c++];)fr(f)&&ur(f)}for(c=a[0];c--;i=i.lastChild);for(;o=i.firstChild;)t.appendChild(o);return t},avalon.innerHTML=function(e,t){if(!x&&!ir.test(t)&&!lr.test(t))try{return void(e.innerHTML=t)}catch(r){}var a=this.parseHTML(t);this.clearHTML(e).appendChild(a)},avalon.clearHTML=function(e){for(e.textContent="";e.firstChild;)e.removeChild(e.firstChild);return e};var dr={_toString:function(){var e=this.node,t=e.className,r="string"==typeof t?t:t.baseVal;return r.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){this.contains(e)||this._set(this+" "+e)},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var t=this.node;p.test(t)?t.setAttribute("class",e):t.className=e}};"add,remove".replace(u,function(e){avalon.fn[e+"Class"]=function(t){var r=this[0];return t&&"string"==typeof t&&r&&1===r.nodeType&&t.replace(/\S+/g,function(t){hr(r)[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&hr(t).contains(e)},toggleClass:function(e,t){for(var r,a=0,n=String(e).split(/\s+/),i="boolean"==typeof t;r=n[a++];){var o=i?t:!this.hasClass(r);this[o?"addClass":"removeClass"](r)}return this},attr:function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},data:function(e,t){switch(e="data-"+vr(e||""),arguments.length){case 2:return this.attr(e,t),this;case 1:var r=this.attr(e);return mr(r);case 0:var a={};return y.forEach.call(this[0].attributes,function(t){t&&(e=t.name,e.indexOf("data-")||(e=pr(e.slice(5)),a[e]=mr(t.value)))}),a}},removeData:function(e){return e="data-"+vr(e),this[0].removeAttribute(e),this},css:function(e,t){if(avalon.isPlainObject(e))for(var r in e)avalon.css(this,r,e[r]);else var a=avalon.css(this,e,t);return void 0!==a?a:this},position:function(){var e,t,r=this[0],a={top:0,left:0};if(r)return"fixed"===this.css("position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(a=e.offset()),a.top+=avalon.css(e[0],"borderTopWidth",!0),a.left+=avalon.css(e[0],"borderLeftWidth",!0),a.top-=e.scrollTop(),a.left-=e.scrollLeft()),{top:t.top-a.top-avalon.css(r,"marginTop",!0),left:t.left-a.left-avalon.css(r,"marginLeft",!0)}},offsetParent:function(){for(var e=this[0].offsetParent;e&&"static"===avalon.css(e,"position");)e=e.offsetParent;return avalon(e||$)},bind:function(e,t,r){return this[0]?avalon.bind(this[0],e,t,r):void 0},unbind:function(e,t,r){return this[0]&&avalon.unbind(this[0],e,t,r),this},val:function(e){var t=this[0];if(t&&1===t.nodeType){var r=0===arguments.length,a=r?":get":":set",n=Pr[Dr(t)+a];if(n)var i=n(t,e);else{if(r)return(t.value||"").replace(/\r/g,"");t.value=e}}return r?i:this}});var gr=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,yr=/^[\],:{}\s]*$/,br=/(?:^|:|,)(?:\s*\[)+/g,xr=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,$r=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=e.JSON?JSON.parse:function(e){if("string"==typeof e){if(e=e.trim(),e&&yr.test(e.replace(xr,"@").replace($r,"]").replace(br,"")))return new Function("return "+e)();avalon.error("Invalid JSON: "+e)}return e},avalon.fireDom=function(e,t,r){if(n.createEvent){var a=n.createEvent("Events");a.initEvent(t,!0,!0,r),avalon.mix(a,r),e.dispatchEvent(a)}else $.contains(e)&&(a=n.createEventObject(),avalon.mix(a,r),e.fireEvent("on"+t,a))},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(r){var a=this[0]||{},n=wr(a),i="scrollTop"===e;return arguments.length?void(n?n.scrollTo(i?avalon(n).scrollLeft():r,i?r:avalon(n).scrollTop()):a[e]=r):n?t in n?n[t]:$[e]:a[e]}});var Cr=avalon.cssHooks={},Nr=["","-webkit-","-o-","-moz-","-ms-"],kr={"float":x?"cssFloat":"styleFloat"};if(avalon.cssNumber=E("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,r){if(kr[e])return kr[e];t=t||$.style;for(var a=0,n=Nr.length;n>a;a++)if(r=pr(Nr[a]+e),r in t)return kr[e]=r;return null},Cr["@:set"]=function(e,t,r){try{e.style[t]=r}catch(a){}},e.getComputedStyle)Cr["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var r,a=getComputedStyle(e,null);return a&&(r="filter"===t?a.getPropertyValue(t):a[t],""===r&&(r=e.style[t])),r},Cr["opacity:get"]=function(e){var t=Cr["@:get"](e,"opacity");return""===t?"1":t};else{var Tr=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Er=/^(top|right|bottom|left)$/,Ar=/alpha\([^)]*\)/i,_r=!!e.XDomainRequest,Sr="DXImageTransform.Microsoft.Alpha",Or={thin:_r?"1px":"2px",medium:_r?"3px":"4px",thick:_r?"5px":"6px"};Cr["@:get"]=function(e,t){var r=e.currentStyle,a=r[t];if(Tr.test(a)&&!Er.test(a)){var n=e.style,i=n.left,o=e.runtimeStyle.left;e.runtimeStyle.left=r.left,n.left="fontSize"===t?"1em":a||0,a=n.pixelLeft+"px",n.left=i,e.runtimeStyle.left=o}return"medium"===a&&(t=t.replace("Width","Style"),"none"===r[t]&&(a="0px")),""===a?"auto":Or[a]||a},Cr["opacity:set"]=function(e,t,r){var a=e.style,n=isFinite(r)&&1>=r?"alpha(opacity="+100*r+")":"",i=a.filter||"";a.zoom=1,a.filter=(Ar.test(i)?i.replace(Ar,n):i+" "+n).trim(),a.filter||a.removeAttribute("filter")},Cr["opacity:get"]=function(e){var t=e.filters.alpha||e.filters[Sr],r=t&&t.enabled?t.opacity:100;return r/100+""}}"top,left".replace(u,function(e){Cr[e+":get"]=function(t){var r=Cr["@:get"](t,e);return/px$/.test(r)?r:avalon(t).position()[e]+"px"}});var Mr={position:"absolute",visibility:"hidden",display:"block"},jr=/^(none|table(?!-c[ea]).+)/;"Width,Height".replace(u,function(e){var t=e.toLowerCase(),r="client"+e,a="scroll"+e,n="offset"+e;Cr[t+":get"]=function(t,r,a){var i=-4;"number"==typeof a&&(i=a),r="Width"===e?["Left","Right"]:["Top","Bottom"];var o=t[n];return 2===i?o+avalon.css(t,"margin"+r[0],!0)+avalon.css(t,"margin"+r[1],!0):(0>i&&(o=o-avalon.css(t,"border"+r[0]+"Width",!0)-avalon.css(t,"border"+r[1]+"Width",!0)),-4===i&&(o=o-avalon.css(t,"padding"+r[0],!0)-avalon.css(t,"padding"+r[1],!0)),o)},Cr[t+"&get"]=function(e){var r=[];Lr(e,r);for(var i,a=Cr[t+":get"](e),n=0;i=r[n++];){e=i.node;for(var o in i)"string"==typeof i[o]&&(e.style[o]=i[o])}return a},avalon.fn[t]=function(i){var o=this[0];if(0===arguments.length){if(o.setTimeout)return o["inner"+e]||o.document.documentElement[r]||o.document.body[r];if(9===o.nodeType){var l=o.documentElement;return Math.max(o.body[a],l[a],o.body[n],l[n],l[r])}return Cr[t+"&get"](o)}return this.css(t,i)},avalon.fn["inner"+e]=function(){return Cr[t+":get"](this[0],void 0,-2)},avalon.fn["outer"+e]=function(e){return Cr[t+":get"](this[0],void 0,e===!0?2:0)}}),avalon.fn.offset=function(){var e=this[0],t={left:0,top:0};if(!e||!e.tagName||!e.ownerDocument)return t;var r=e.ownerDocument,a=r.body,n=r.documentElement,i=r.defaultView||r.parentWindow;if(!avalon.contains(n,e))return t;e.getBoundingClientRect&&(t=e.getBoundingClientRect());var o=n.clientTop||a.clientTop,l=n.clientLeft||a.clientLeft,s=Math.max(i.pageYOffset||0,n.scrollTop,a.scrollTop),c=Math.max(i.pageXOffset||0,n.scrollLeft,a.scrollLeft);return{top:t.top+s-o,left:t.left+c-l}};var Hr=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,Pr={"option:get":S?function(e){return Hr.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,t){for(var r,a=e.options,n=e.selectedIndex,i=Pr["option:get"],o="select-one"===e.type||0>n,l=o?null:[],s=o?n+1:a.length,c=0>n?s:o?n:0;s>c;c++)if(r=a[c],(r.selected||c===n)&&!r.disabled){if(t=i(r),o)return t;l.push(t)}return l},"select:set":function(e,t,r){t=[].concat(t);for(var i,a=Pr["option:get"],n=0;i=e.options[n++];)(i.selected=t.indexOf(a(i))>-1)&&(r=!0);r||(e.selectedIndex=-1)}},Fr={},Rr=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");Rr.replace(/\w+/g,function(e){Fr[e]=!0});var Br=/[a-z_$]/i,qr=/[\s\uFEFF\xA0]/,zr=/(\$proxy\$[a-z]+)\d+$/,Wr=new B(218),Xr=new B(128);avalon.normalizeExpr=Jr,avalon.parseExprProxy=Gr;var Zr=/\)\s*$/,Kr=/\)\s*\|/g,Qr=/\|\s*([$\w]+)/g,ea=/"\s*\["/g,ta=/"\s*\(/g,aa={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},na=e.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(e){var t=aa[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'};avalon.scan=function(e,t){e=e||$;var r=t?[].concat(t):[];Sa(e,r)};var ia=E("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase()),sa=function(e,t,r){var a=e.getAttribute(t);if(a)for(var i,n=0;i=r[n++];)if(i.hasOwnProperty(a)&&"function"==typeof i[a])return i[a]},fa=S&&e.MutationObserver?function(e){for(var r,t=e.firstChild;t;){var a=t.nextSibling;3===t.nodeType?r?(r.nodeValue+=t.nodeValue,e.removeChild(t)):r=t:r=null,t=a}}:0,ua=/^\s*::/,va=/ms-(\w+)-?(.*)/,pa=E("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit"),da=E("value,title,alt,checked,selected,disabled,readonly,enabled,href,src"),ma=/^(ms-\S+|data-\S+|on[a-z]+|id|style|class)$/,xa=/^if|widget|repeat$/,$a=/^each|with|html|include$/;if(!x)var wa=new B(512),Ca=/\s+([^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Na=/^['"]/,ka=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,Ta=/&amp;/g,Ea=function(e){var t=e.outerHTML;if("</"===t.slice(0,2)||!t.trim())return[];var n,i,r=t.match(ka)[0],a=[],o=wa.get(r);if(o)return o;for(;n=Ca.exec(r);){i=n[2],i&&(i=(Na.test(i)?i.slice(1,-1):i).replace(Ta,"&"));var l=n[1].toLowerCase();match=l.match(va);var s={name:l,specified:!0,value:i||""};a.push(s)}return wa.put(r,a)};var Oa=/\|\s*html(?:\b|$)/,Ma=/\|\|/g,Da=/(['"])(\\\1|.)+?\1/g,Ra=function(){this.queue=[]};Ra.prototype={render:function(e){if(!this.locked){this.locked=e?$.offsetHeight+10:1;var t=this;avalon.nextTick(function(){t.flush()})}},flush:function(){for(var t,e=0;t=this.queue[e++];)t.update&&t.update();this.locked=0,this.queue=[]}};var Ba=new Ra,qa=[],Ia=[],Va={$construct:function(){return avalon.mix.apply(null,arguments)},$ready:T,$init:T,$dispose:T,$container:null,$childReady:T,$replace:!1,$extend:null,$$template:function(e){return e}};avalon.components={},avalon.component=function(t,r){r&&(avalon.components[t]=avalon.mix({},Va,r));for(var i,a=0;i=qa[a];a++)t===i.fullName&&(qa.splice(a,1),a--,function(r,a,i,o){if(!avalon.contains(n,i))return void avalon.Array.remove(qa,r);var l=1,s=r.library,c=avalon.libraries[s]||Va;if(!i.getAttribute("ms-attr-identifier")){var f=ya(i,r.vmodels),u=Ua(r.vmodels,f.config||r.fullName),v=f.$id||f.identifier||A(o);delete f.config,delete f.$id,delete f.identifier;var p={},d=avalon.components[a.$extend];d?(avalon.mix(!0,p,d),p=d.$construct.call(i,p,{},{})):avalon.mix(!0,p,a),p=avalon.components[t].$construct.call(i,p,u,f),p.$refs={},p.$id=v;var h=p.$slot,m=p.$replace,g=p.$container,y=p.$template;delete p.$slot,delete p.$replace,delete p.$container,delete p.$construct;var b=avalon.define(p)||{};i.msResolved=1,b.$init(b,i),c.$init(b,i);for(var C,k,x=i.childNodes,$={},N=0;k=x[N++];){var T=1===k.nodeType&&k.getAttribute("slot")||h;T&&($[T]?$[T].push(k):$[T]=[k])}b.$$template&&(avalon.clearHTML(i),i.innerHTML=b.$$template(y));for(N in $)if(b.hasOwnProperty(N)){var E=$[N];if(E.length){for(var _=w.cloneNode(!0),S=0;C=E[S++];)_.appendChild(C);b[N]=_}$[N]=null}$=null;var O=i.children[0]||i.firstChild;if(m){i.parentNode.replaceChild(O,i),O.msResolved=1;var M=i.style.cssText,j=i.className;i=r.element=O,i.style.cssText=M,j&&avalon(i).addClass(j)}g&&g.appendChild(i),avalon.fireDom(i,"datasetchanged",{library:s,vm:b,childReady:1});var L=0,D=avalon.bind(i,"datasetchanged",function(t){if(t.childReady&&t.library===s&&(l+=t.childReady,b!==t.vm&&(b.$refs[t.vm.$id]=t.vm,-1===t.childReady&&(L++,b.$childReady(b,i,t)),t.stopPropagation())),0===l){var a=setTimeout(function(){clearTimeout(a),b.$ready(b,i,r.vmodels),c.$ready(b,i,r.vmodels)},L?Math.max(17*L,100):17);avalon.unbind(i,"datasetchanged",D),r.rollback=function(){try{b.$dispose(b,i),c.$dispose(b,i)}catch(e){}delete avalon.vmodels[b.$id]},Kt(r,Ia),e.chrome&&i.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(Qt)})}});if(Sa(i,[b].concat(r.vmodels)),avalon.vmodels[b.$id]=b,i.childNodes.length)var H=setTimeout(function(){clearTimeout(H),avalon.fireDom(i,"datasetchanged",{library:s,vm:b,childReady:-1})},17);else avalon.fireDom(i,"datasetchanged",{library:s,vm:b,childReady:-1})}}(i,avalon.components[t],i.element,i.widget))},avalon.libraries=[],avalon.library=function(e,t){n.namespaces&&n.namespaces.add(e,"http://www.w3.org/1999/xhtml"),avalon.libraries[e]=avalon.mix({$init:T,$ready:T,$dispose:T},t||{})},avalon.library("ms");var Wa=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(","),Xa={};Wa.replace(u,function(e){Xa[e.toLowerCase()]=e});var Ya={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"},Ga=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");Ga.replace(u,function(e){Ya[e.toLowerCase()]=e});var Ja=avalon.directive("attr",{init:function(e){if(e.expr=Jr(e.expr.trim()),"include"===e.type){var t=e.element;yn(t,e),e.includeRendered=sa(t,"data-include-rendered",e.vmodels),e.includeLoaded=sa(t,"data-include-loaded",e.vmodels);var r=e.includeReplace=!!avalon(t).data("includeReplace");avalon(t).data("includeCache")&&(e.templateCache={}),e.start=n.createComment("ms-include"),e.end=n.createComment("ms-include-end"),r?(e.element=e.end,e._element=t,t.parentNode.insertBefore(e.start,t),t.parentNode.insertBefore(e.end,t.nextSibling)):(t.insertBefore(e.start,t.firstChild),t.appendChild(e.end))}},update:function(t){var r=this.element,a=this.param;if("href"===a||"src"===a){if("string"!=typeof t||$.hasAttribute||(t=t.replace(/&amp;/g,"&")),r[a]=t,e.chrome&&"EMBED"===r.tagName){var i=r.parentNode,o=document.createComment("ms-src");i.replaceChild(o,r),i.replaceChild(r,o)}}else{var l=t===!1||null===t||void 0===t;!x&&Ya[a]&&(a=Ya[a]);var s=Xa[a];if("boolean"==typeof r[s]&&(r[s]=!!t,t||(l=!0)),l)return r.removeAttribute(a);var c=p.test(r)?!1:n.namespaces&&fr(r)?!0:a in r.cloneNode(!1);c?r[a]=t+"":r.setAttribute(a,t)}}});"title,alt,src,value,css,include,href".replace(u,function(e){F[e]=Ja}),avalon.directive("class",{init:function(e){var t=e.param,r=e.type;if(!t||isFinite(t)?(e.param="",F.effect.init(e)):(s("ms-"+r+'-xxx="yyy"这种用法已经过时,请使用ms-'+r+'="xxx:yyy"'),e.expr="["+na(t)+","+e.expr+"]",e.oldStyle=t),"hover"===r||"active"===r){if(!e.hasBindEvent){var a=e.element,n=avalon(a),i="mouseenter",o="mouseleave";if("active"===r){a.tabIndex=a.tabIndex||-1,i="mousedown",o="mouseup";var l=n.bind("mouseleave",function(){e.toggleClass&&n.removeClass(e.newClass)})}}var c=n.bind(i,function(){e.toggleClass&&n.addClass(e.newClass)}),f=n.bind(o,function(){e.toggleClass&&n.removeClass(e.newClass)});e.rollback=function(){n.unbind("mouseleave",l),n.unbind(i,c),n.unbind(o,f)},e.hasBindEvent=!0}},update:function(e){var t=this,r=avalon(this.element);t.newClass=e[0],t.toggleClass=!!e[1],t.oldClass&&t.newClass!==t.oldClass&&r.removeClass(t.oldClass),t.oldClass=t.newClass,"class"===t.type&&(t.oldStyle?r.toggleClass(t.oldStyle,!!e[1]):r.toggleClass(t.newClass,t.toggleClass))}}),"hover,active".replace(u,function(e){F[e]=F["class"]}),avalon.directive("css",{init:F.attr.init,update:function(e){avalon(this.element).css(this.param,e)}}),avalon.directive("data",{priority:100,update:function(e){var t=this.element,r="data-"+this.param;e&&"object"==typeof e?t[r]=e:t.setAttribute(r,String(e))}});{var Za=/^(?:checkbox|radio)$/,Ka=/^(?:radio|checked)$/,Qa=/^(file|button|reset|submit|checkbox|radio|range)$/;avalon.directive("duplex",{priority:2e3,init:function(e,t){function c(t){e.changed.call(this,t,e)}function f(){l=!0}function u(){l=!1}var r=e.element,a=e.vmodels;e.changed=sa(r,"data-duplex-changed",a)||T;var n=[],i=E("string,number,boolean,checked");"radio"===r.type&&""===e.param&&(e.param="checked"),e.param.replace(v,function(a){Za.test(r.type)&&Ka.test(a)&&("radio"===a&&s("ms-duplex-radio已经更名为ms-duplex-checked"),a="checked",e.isChecked=!0,e.xtype="radio"),"bool"===a?(a="boolean",s("ms-duplex-bool已经更名为ms-duplex-boolean")):"text"===a&&(a="string",s("ms-duplex-text已经更名为ms-duplex-string")),i[a]&&(t=!0),avalon.Array.ensure(n,a)}),t||n.push("string"),e.param=n.join("-"),e.xtype||(e.xtype="SELECT"===r.tagName?"select":"checkbox"===r.type?"checkbox":"radio"===r.type?"radio":/^change/.test(r.getAttribute("data-duplex-event"))?"change":"input");var o=e.bound=function(t,a){r.addEventListener?r.addEventListener(t,a,!1):r.attachEvent("on"+t,a);var n=e.rollback;e.rollback=function(){r.avalonSetter=null,avalon.unbind(r,t,a),n&&n()}},l=!1,p=function(){var a=r.value;if(!l&&a!==e.oldValue&&null!==e.pipe){var n=e.pipe(a,e,"get");try{e.oldValue=a,e.setter(n),c.call(r,n)}catch(i){s(i)}}};switch(e.xtype){case"radio":e.bound("click",function(){var t=e.pipe(r.value,e,"get");try{e.setter(t),c.call(r,t)}catch(a){s(a)}});break;case"checkbox":o(x?"change":"click",function(){var t=r.checked?"ensure":"remove",a=e.getter.apply(0,e.vmodels);Array.isArray(a)||(s("ms-duplex应用于checkbox上要对应一个数组"),a=[a]);var n=e.pipe(r.value,e,"get");avalon.Array[t](a,n),c.call(r,a)});break;case"change":o("change",p);break;case"input":S?(S>8?(9===S&&o("keyup",p),o("input",p)):o("propertychange",function(e){"value"===e.propertyName&&p()}),o("dragend",function(){setTimeout(function(){p()},17)})):(o("input",p),o("compositionstart",f),o("compositionend",u),o("DOMAutoComplete",p));break;case"select":o("change",function(){var t=avalon(r).val();if(t=Array.isArray(t)?t.map(function(t){return e.pipe(t,e,"get")}):e.pipe(t,e,"get"),t+""!==e.oldValue)try{e.setter(t)}catch(a){s(a)}}),o("datasetchanged",function(t){if("selectDuplex"===t.bubble){var a=e._value,n=Array.isArray(a)?a.map(String):a+"";avalon(r).val(n),r.oldValue=n+"",c.call(r,n)}})}"input"!==e.xtype||Qa.test(r.type)||("hidden"!==r.type&&(o("focus",function(){r.msFocus=!0}),o("blur",function(){r.msFocus=!1})),r.avalonSetter=p,ln(function(){if(avalon.contains($,r))this.msFocus||p();else if(!r.msRetain)return!1}))},update:function(e){var a,t=this.element,r=this;if(!this.init){for(var n in avalon.vmodels){var i=avalon.vmodels[n];i.$fire("avalon-ms-duplex-init",r)}var o=r.pipe||(r.pipe=rn);o(null,r,"init"),this.init=1}switch(this.xtype){case"input":case"change":if(a=this.pipe(e,this,"set"),a!==this.oldValue){var l=!1;if(t.msFocus)try{var s=sn(t);s.start===s.end&&(s=s.start,l=!0)}catch(c){}t.value=r.oldValue=a,l&&cn(t,s,s)}break;case"radio":a=r.isChecked?!!e:e+""===t.value,6===S?setTimeout(function(){t.defaultChecked=a,t.checked=a},31):t.checked=a;break;case"checkbox":var f=[].concat(e);a=this.pipe(t.value,this,"get"),t.checked=f.indexOf(a)>-1;break;case"select":r._value=e,t.msHasEvent?avalon.fireDom(t,"datasetchanged",{bubble:t.msHasEvent}):t.msHasEvent="selectDuplex"}}})}S&&avalon.bind(n,"selectionchange",function(){var t=n.activeElement||{};!t.msFocus&&t.avalonSetter&&t.avalonSetter()}),avalon.duplexHooks={checked:{get:function(e,t){return!t.oldValue}},string:{get:function(e){return e},set:tn},"boolean":{get:function(e){return"true"===e},set:tn},number:{get:function(e,t){var r=parseFloat(e+"");if(-e===-r)return r;var a=/strong|medium|weak/.exec(t.element.getAttribute("data-duplex-number"))||["medium"];switch(a[0]){case"strong":return 0;case"medium":return""===e?"":0;case"weak":return e}},set:tn}};var an,nn=[];avalon.tick=function(e){1===nn.push(e)&&(an=setInterval(on,60))};var ln=T;!new function(){function a(t){e[this.tagName].call(this,t),!this.msFocus&&this.avalonSetter&&this.avalonSetter()}try{var e={},t=HTMLInputElement.prototype,r=HTMLTextAreaElement.prototype,n=HTMLInputElement.prototype;Object.getOwnPropertyNames(n),e.INPUT=Object.getOwnPropertyDescriptor(t,"value").set,Object.defineProperty(t,"value",{set:a}),e.TEXTAREA=Object.getOwnPropertyDescriptor(r,"value").set,Object.defineProperty(r,"value",{set:a})}catch(i){ln=avalon.tick}},avalon.directive("effect",{priority:5,init:function(e){var r,a,t=e.expr,n=t.replace(lt,function(e){return e.replace(/./g,"0")}).indexOf(":");-1===n?(r=t,a=!0):(r=t.slice(0,n),a=t.slice(n+1)),r=ot.test(t)?Jr(r):na(r),e.expr="["+r+","+a+"]"},update:function(t){var r=t[0],a=this.element;if(a.getAttribute("data-effect-name")!==r){a.removeAttribute("data-effect-driver");var n=a.style,i=e.getComputedStyle?e.getComputedStyle(a):null,o=!1;if(i&&(fn||un)){var l=n[dn]||i[dn];l&&"0s"!==l&&(a.setAttribute("data-effect-driver","t"),o=!0),o||(l=n[hn]||i[hn],l&&"0s"!==l&&(a.setAttribute("data-effect-driver","a"),o=!0))}o||avalon.effects[r]&&(a.setAttribute("data-effect-driver","j"),o=!0),o&&a.setAttribute("data-effect-name",r)}}}),avalon.effects={},avalon.effect=function(e,t){avalon.effects[e]=t};var vn,pn,fn=!1,un=!1,dn=avalon.cssName("transition-duration"),hn=avalon.cssName("animation-duration");!new function(){var r,t={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"};for(var a in t){if(e[a]){r=t[a];break}try{{document.createEvent(a)}r=t[a];break}catch(i){}}"string"==typeof r&&(fn=!0,vn=r),t={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};var o;for(a in t)if(e[a]){o=t[a];break}"string"==typeof o&&(fn=!0,pn=o)};var mn=[],xn=new Ra;$n.prototype={contrustor:$n,enterClass:function(){return wn(this,"enter")},leaveClass:function(){return wn(this,"leave")},actionFun:function(e,t,r){if(!document.hidden){var a=this,n=a.el,i="leave"===e;e=i?"leave":"enter";var o=i?"enter":"leave";Cn(a,"abort"+bn(o)),Cn(a,"before"+bn(e)),i||t(n);var l=function(o){n.removeEventListener(a.cssEvent,a.cssCallback),i?(t(n),avalon(n).removeClass(a.cssClass)):"a"===a.driver&&avalon(n).removeClass(a.cssClass),o!==!0&&(Cn(a,"after"+bn(e)),r&&r(n)),a.dispose()};a.useCss?(a.cssCallback&&a.cssCallback(!0),a.cssClass=wn(a,e),a.cssCallback=l,a.update=function(){n.addEventListener(a.cssEvent,a.cssCallback),i||"t"!==a.driver||avalon(n).removeClass(a.cssClass)},avalon(n).addClass(a.cssClass),xn.render(!0),xn.queue.push(a)):Cn(a,e,l)}},enter:function(){this.actionFun.apply(this,["enter"].concat(avalon.slice(arguments)))},leave:function(){this.actionFun.apply(this,["leave"].concat(avalon.slice(arguments)))},dispose:function(){this.update=this.cssCallback=null,mn.unshift(this)>100&&mn.pop()}};var Nn=function(e,t){var r=b.call(arguments,0);"function"!=typeof r[2]&&r.splice(2,0,T),"function"!=typeof r[3]&&r.splice(3,0,T);var a=r[2],n=r[3],i=r[4],o=gn(e,i);if(!o)return a(),n(),!1;var l=t?"enter":"leave";o[l](a,n)};avalon.mix(avalon.effect,{apply:Nn,append:function(e,t,r,a){return Nn(e,1,function(){t.appendChild(e)},r,a)},before:function(e,t,r,a){return Nn(e,1,function(){t.parentNode.insertBefore(e,t)},r,a)},remove:function(e,t,r,a){return Nn(e,0,function(){e.parentNode===t&&t.removeChild(e)},r,a)}}),avalon.directive("html",{update:function(e){var t=this,r=this.element,a=1!==r.nodeType,i=a?r.parentNode:r;if(i){if(e=null==e?"":e,3===r.nodeType){var o=A("html");i.insertBefore(n.createComment(o),r),t.element=n.createComment(o+":end"),i.replaceChild(t.element,r),r=t.element}if("object"!=typeof e)var l=avalon.parseHTML(String(e));else if(11===e.nodeType)l=e;else if(1===e.nodeType||e.item){var s=1===e.nodeType?e.childNodes:e.item;for(l=w.cloneNode(!0);s[0];)l.appendChild(s[0])}if(s=avalon.slice(l.childNodes),a){for(var c=r.nodeValue.slice(0,-4);;){var f=r.previousSibling;if(!f||8===f.nodeType&&f.nodeValue===c)break;i.removeChild(f)}i.insertBefore(l,r)}else avalon.clearHTML(r).appendChild(l);_a(s,t.vmodels)}}}),avalon.directive("if",{priority:10,update:function(e){function c(){r.getAttribute(t.name)&&(r.removeAttribute(t.name),ba(r,t.vmodels)),t.rollback=null}var i,t=this,r=this.element,a=t.stamp=+new Date,l=function(){a===t.stamp&&(t.recoverNode=null)};t.recoverNode&&t.recoverNode();try{if(!r.parentNode)return;i=r.parentNode}catch(s){return}if(e){if(8===r.nodeType){var f=t.keep,u=avalon.effect.apply(f,1,function(){a===t.stamp&&(r.parentNode.replaceChild(f,r),r=t.element=f,f.getAttribute("_required")&&(r.required=!0,r.removeAttribute("_required")),r.querySelectorAll&&avalon.each(r.querySelectorAll("[_required=true]"),function(e){e.required=!0,e.removeAttribute("_required")}),c())},l);u=u===!1}u||c()}else if(1===r.nodeType){r.required===!0&&(r.required=!1,r.setAttribute("_required","true"));try{avalon.each(r.querySelectorAll(":required"),function(e){r.required=!1,e.setAttribute("_required","true")})}catch(s){}var v=t.element=n.createComment("ms-if"),p=r.nextSibling;t.recoverNode=function(){t.recoverNode=null,v.parentNode!==i&&(i.insertBefore(v,p),t.keep=r)},avalon.effect.apply(r,0,function(){t.recoverNode=null,a===t.stamp&&(r.parentNode.replaceChild(v,r),t.keep=r,o.appendChild(r),t.rollback=function(){r.parentNode===o&&o.removeChild(r)})},l)}}});var kn=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/gim,Tn=/<noscript.*?>([\s\S]+?)<\/noscript>/im,En=function(){return new(e.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")},An=avalon.templateCache={};avalon.directive("include",{init:F.attr.init,update:function(e){var t=this,r=this.element,a=t.vmodels,i=t.includeRendered,l=t.effectName&&t.effectClass,c=t.templateCache,f=t.includeReplace,u=t.includeLoaded,v=f?r.parentNode:r,p=t._element;t.recoverNodes=t.recoverNodes||avalon.noop;var d=function(s){var d=t._stamp=+new Date;if(u){var h=u.apply(v,[s].concat(a));"string"==typeof h&&(s=h)}i&&oa(v,function(){i.call(v)},0/0);var m=t.includeLastID||"_default";t.includeLastID=e;var g=c&&c[m]||n.createElement(r.tagName||t._element.tagName);l&&(g.className=l,v.insertBefore(g,t.start)),(c||{})[m]=g;var y=t.recoverNodes();for(y&&v.insertBefore(y,t.end);;){var b=t.start.nextSibling;if(!b||b===g||b===t.end)break;g.appendChild(b)}avalon.effect.remove(g,v,function(){c&&d===t._stamp&&o.appendChild(g)},t);var x=v,$=avalon.noop,w=avalon.noop,C=_n(t,e,s),N=avalon.slice(C.childNodes);f&&l?(x=p,x.innerHTML="",x.setAttribute("ms-skip","true"),v.insertBefore(x,t.end.nextSibling),$=function(){x.insertBefore(C,null)
},w=function(){t.recoverNodes=avalon.noop,d===t._stamp&&(C=Sn(N),v.insertBefore(C,t.end),_a(N,a)),x.parentNode===v&&v.removeChild(x)},t.recoverNodes=function(){return t.recoverNodes=avalon.noop,Sn(N)}):$=function(){v.insertBefore(C,t.end),_a(N,a)},avalon.effect.apply(x,"enter",$,w)};if("src"===t.param)if("string"==typeof An[e])avalon.nextTick(function(){d(An[e])});else if(Array.isArray(An[e]))An[e].push(d);else{var h=En();h.onreadystatechange=function(){if(4===h.readyState){var t=h.status;if(t>=200&&300>t||304===t||1223===t){for(var n,r=h.responseText,a=0;n=An[e][a++];)n(r);An[e]=r}else s("ms-include load ["+e+"] error")}},An[e]=[d],h.open("GET",e,!0),"withCredentials"in h&&(h.withCredentials=!0),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.send(null)}else{var m=e&&1===e.nodeType?e:n.getElementById(e);if(m){if("NOSCRIPT"===m.tagName&&!m.innerHTML&&!m.fixIE78){h=En(),h.open("GET",location,!1),h.send(null);for(var g=n.getElementsByTagName("noscript"),y=(h.responseText||"").match(kn)||[],b=y.length,x=0;b>x;x++){var $=g[x];$&&($.style.display="none",$.fixIE78=(y[x].match(Tn)||["","&nbsp;"])[1])}}avalon.nextTick(function(){d(m.fixIE78||m.value||m.innerText||m.innerHTML)})}}}});var On=/\(([^)]*)\)/,Mn=avalon.directive("on",{priority:3e3,init:function(e){var t=e.expr;e.type="on";var r=e.param.replace(/-\d+$/,"");if("function"==typeof Mn[r+"Hook"]&&Mn[r+"Hook"](e),t.indexOf("(")>0&&t.indexOf(")")>-1){var a=(t.match(On)||["",""])[1].trim();(""===a||"$event"===a)&&(t=t.replace(On,""))}e.expr=t},update:function(e){var t=this,r=this.element;e=function(e){var r=t.getter||T;return r.apply(this,t.args.concat(e))};var a=t.param.replace(/-\d+$/,"");if("scan"===a)e.call(r,{type:a});else if("function"==typeof t.specialBind)t.specialBind(r,e);else var n=avalon.bind(r,a,e);t.rollback=function(){"function"==typeof t.specialUnbind?t.specialUnbind():avalon.unbind(r,a,n)}}});avalon.directive("repeat",{priority:90,init:function(e){var t=e.type;e.cache={},e.enterCount=0;var r=e.element;if(1===r.nodeType){r.removeAttribute(e.name),yn(r,e),e.param=e.param||"el",e.sortedCallback=sa(r,"data-with-sorted",e.vmodels);var a=sa(r,"data-"+t+"-rendered",e.vmodels),i=A(t),o=n.createComment(i+":start"),l=e.element=n.createComment(i+":end");if(e.signature=i,e.start=o,e.template=w.cloneNode(!1),"repeat"===t){var s=r.parentNode;s.replaceChild(l,r),s.insertBefore(o,l),e.template.appendChild(r)}else{for(;r.firstChild;)e.template.appendChild(r.firstChild);r.appendChild(o),r.appendChild(l),s=r}if(e.element=l,a)var c=avalon.bind(s,"datasetchanged",function(){a.apply(s,s.args),avalon.unbind(s,"datasetchanged",c),s.msRendered=a})}},update:function(e,t){var r=this,a=this.xtype;this.enterCount+=1;var n=!t;if(n){r.$outer={};var i="$key",o="$val";"array"===a&&(i="$first",o="$last");for(var s,l=0;s=r.vmodels[l++];)if(s.hasOwnProperty(i)&&s.hasOwnProperty(o)){r.$outer=s;break}}var c=this.track;if(r.sortedCallback){var f=r.sortedCallback.call(b,c);f&&Array.isArray(f)&&(c=f)}var u="move";r.$repeat=e;var v=[],p=n&&w.cloneNode(!1),d=[],h=this.param,m=avalon.mix({},this.cache),g=this.element,y=c.length,b=g.parentNode;for(l=0;y>l;l++){var x=c[l],$=m[x];if($)v.push({}),m[x]=!0;else{if($=Pn(this),$.$up=null,"array"===a){u="add",$.$id=x;var C=e[l];$[h]=C,Object(C)===C&&(C.$ups=C.$ups||{},C.$ups[h]=$)}else u="append",$.$key=x,$.$val=e[x];this.cache[x]=$;var N=$.$anchor||($.$anchor=g.cloneNode(!1));N.nodeValue=this.signature,Hn(r,p,$,v,n&&!r.effectDriver),qn($,r,a)}1===this.enterCount&&($.$active=!1,$.$oldIndex=$.$index,$.$active=!0,$.$index=l),"array"===a?($.$first=0===l,$.$last=l===y-1):$.$val=Ot(e[x]),d.push($)}if(this.proxies=d,n&&!r.effectDriver)b.insertBefore(p,g),v.forEach(function(e){_a(e.nodes||[],e.vmodels),e.nodes=e.vmodels=null});else{var k=r.staggerIndex=0;for(x in m)m[x]!==!0&&(u="del",Dn(m[x].$anchor,r),zn(this.cache,x,h),m[x]=null);for(l=0;y>l;l++){$=d[l],x="array"===a?$.$id:$.$key;var T=d[l-1],E=T?T.$anchor:r.start;m[x]?$.$index!==$.$oldIndex&&!function(e,t){k=Ln(r.effectEnterStagger,function(){var a=Dn(e.$anchor),n=avalon.slice(a.childNodes);b.insertBefore(a,t.nextSibling),jn(n,1,r)},k)}($,E):!function(e,t){var a=e.nodes,n=e.vmodels;a&&(k=Ln(r.effectEnterStagger,function(){b.insertBefore(e.content,t.nextSibling),_a(a,n),jn(a,1,r)},k)),e.nodes=e.vmodels=null}(v[l],E)}}if(!e.$track)for(x in this.cache)zn(this.cache,x,h);!function(e){b.args=e,b.msRendered&&b.msRendered.apply(b,e)}(at.newWatch?arguments:[u]);var A=setTimeout(function(){clearTimeout(A),avalon.fireDom(b,"datasetchanged",{bubble:b.msHasEvent})});this.enterCount-=1}}),"with,each".replace(u,function(e){F[e]=avalon.mix({},F.repeat,{priority:1400})});var Fn=[],In=[];avalon.directive("text",{update:function(e){var t=this.element;if(e=null==e?"":e,3===t.nodeType)try{t.data=e}catch(r){}else"textContent"in t?t.textContent=e:t.innerText=e}}),avalon.parseDisplay=Wn,avalon.directive("visible",{init:function(e){yn(e.element,e)},update:function(e){var a,t=this,r=this.element,n=!this.effectName;return this.stamp?(a=this.stamp=+new Date,void(e?avalon.effect.apply(r,1,function(){if(a===t.stamp){var e=r.getAttribute("data-effect-driver")||"a";n&&(r.style.display=t.display||""),("a"===e||"t"===e)&&"none"===avalon(r).css("display")&&(r.style.display=t.display||Wn(r.nodeName))}}):avalon.effect.apply(r,0,function(){a===t.stamp&&(r.style.display="none")}))):(a=this.stamp=+new Date,void(e?(r.style.display=t.display||"","none"===avalon(r).css("display")&&(r.style.display=t.display=Wn(r.nodeName))):r.style.display="none"))}});var Xn=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,Yn=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Gn=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,Jn={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi},Zn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kn=/([^\#-~| |!])/g,ei=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,r){return t=t||30,r="string"==typeof r?r:"...",e.length>t?e.slice(0,t-r.length)+r:String(e)},$filter:function(e){for(var t=1,r=arguments.length;r>t;t++){var a=arguments[t],n=avalon.filters[a[0]];if("function"==typeof n){var i=[e].concat(a.slice(1));e=n.apply(null,i)}}return e},camelize:pr,sanitize:function(e){return e.replace(Xn,"").replace(Gn,function(e){var r=e.toLowerCase().match(/<(\w+)\s/);if(r){var a=Jn[r[1]];a&&(e=e.replace(a,function(e,t,r){var a=r.charAt(0);return t+"="+a+"javascript:void(0)"+a}))}return e.replace(Yn," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(Zn,function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(r-56320)+65536)+";"}).replace(Kn,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,t,r){return(t||"￥")+Qn(e,isFinite(r)?r:2)},number:Qn};!new function(){function e(e){return parseInt(e,10)||0}function t(e,t,r){var a="";for(0>e&&(a="-",e=-e),e=""+e;e.length<t;)e="0"+e;return r&&(e=e.substr(e.length-t)),a+e}function r(e,r,a,n){return function(i){var o=i["get"+e]();return(a>0||o>-a)&&(o+=a),0===o&&-12===a&&(o=12),t(o,r,n)}}function a(e,t){return function(r,a){var n=r["get"+e](),i=(t?"SHORT"+e:e).toUpperCase();return a[i][n]}}function n(e){var r=-1*e.getTimezoneOffset(),a=r>=0?"+":"";return a+=t(Math[r>0?"floor":"ceil"](r/60),2)+t(Math.abs(r%60),2)}function i(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}var o={yyyy:r("FullYear",4),yy:r("FullYear",2,0,!0),y:r("FullYear",1),MMMM:a("Month"),MMM:a("Month",!0),MM:r("Month",2,1),M:r("Month",1,1),dd:r("Date",2),d:r("Date",1),HH:r("Hours",2),H:r("Hours",1),hh:r("Hours",2,-12),h:r("Hours",1,-12),mm:r("Minutes",2),m:r("Minutes",1),ss:r("Seconds",2),s:r("Seconds",1),sss:r("Milliseconds",3),EEEE:a("Day"),EEE:a("Day",!0),a:i,Z:n},l=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,s=/^\/Date\((\d+)\)\/$/;ei.date=function(t,r){var c,f,a=ei.date.locate,n="",i=[];if(r=r||"mediumDate",r=a[r]||r,"string"==typeof t)if(/^\d+$/.test(t))t=e(t);else if(s.test(t))t=+RegExp.$1;else{var u=t.trim(),v=[0,0,0,0,0,0,0],p=new Date(0);u=u.replace(/^(\d+)\D(\d+)\D(\d+)/,function(t,r,a,n){var i=4===n.length?[n,r,a]:[r,a,n];return v[0]=e(i[0]),v[1]=e(i[1])-1,v[2]=e(i[2]),""});var d=p.setFullYear,h=p.setHours;u=u.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(t,r,a,n,i){return v[3]=e(r),v[4]=e(a),v[5]=e(n),i&&(v[6]=Math.round(1e3*parseFloat("0."+i))),""});var m=0,g=0;u=u.replace(/Z|([+-])(\d\d):?(\d\d)/,function(t,r,a,n){return d=p.setUTCFullYear,h=p.setUTCHours,r&&(m=e(r+a),g=e(r+n)),""}),v[3]-=m,v[4]-=g,d.apply(p,v.slice(0,3)),h.apply(p,v.slice(3)),t=p}if("number"==typeof t&&(t=new Date(t)),"date"===avalon.type(t)){for(;r;)f=l.exec(r),f?(i=i.concat(f.slice(1)),r=i.pop()):(i.push(r),r=null);return i.forEach(function(e){c=o[e],n+=c?c(t,a):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),n}};var c={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};c.SHORTMONTH=c.MONTH,ei.date.locate=c};var ti=avalon.modules={"domReady!":{exports:avalon,state:3},avalon:{exports:avalon,state:4}};ti.exports=ti.avalon;var ni,ri=e.require,ai=e.define;ut.loader=function(t){var r=ni&&t;e.require=r?ni:ri,e.define=r?ni.define:ai},new function(){function f(e,t){var r="js";e=e.replace(/^(\w+)\!/,function(e,t){return r=t,""}),"ready"===r&&(s("debug: ready!已经被废弃，请使用domReady!"),r="domReady");var a="";e=e.replace(l,function(e){return a=e,""});var n="."+r,i=/js|css/.test(n)?n:"";e=e.replace(/\.[a-z0-9]+$/g,function(e){return e===n?(i=e,""):e});var o=avalon.mix({query:a,ext:i,res:r,name:e,toUrl:M},t);return o.toUrl(e),o}function u(e){var t=e.name,r=e.res,a=ti[t],n=t&&e.urlNoQuery;if(a&&a.state>=1)return t;if(a=ti[n],a&&a.state>=3)return ni(a.deps||[],a.factory,n),n;if(t&&!a){a=ti[n]={id:n,state:1};var i=function(n){N[r]=n,n.load(t,e,function(e){arguments.length&&void 0!==e&&(a.exports=e),a.state=4,$()})};N[r]?i(N[r]):ni([r],i)}return t?n:r+"!"}function b(e,t){for(var a,r=0;a=e[r++];)if(4!==ti[a].state&&(a===t||b(ti[a].deps,t)))return!0}function x(e,t,r){var a=k(e.src);return e.onload=e.onreadystatechange=e.onerror=null,t||r&&ti[a]&&!ti[a].state?(setTimeout(function(){i.removeChild(e),e=null}),void s("debug: 加载 "+a+" 失败"+t+" "+!ti[a].state)):!0}function $(){e:for(var r,e=t.length;r=t[--e];){var a=ti[r],n=a.deps;if(n){for(var o,i=0;o=n[i];i++)if(4!==Object(ti[o]).state)continue e;4!==a.state&&(t.splice(e,1),O(a.id,a.deps,a.factory),$())}}}function C(e,a,o){function v(){var n=r.pop();n&&n.require(a),o&&o(),x(l,!1,!f)&&(s("debug: 已成功加载 "+e),a&&t.push(a),$())}var l=n.createElement("script"),f="onload"in l,u=f?"onload":"onreadystatechange";l[u]=f?v:function(){w.test(l.readyState)&&v()},l.onerror=function(){x(l,!0)},l.className=c,l.src=e,i.insertBefore(l,i.firstChild),s("debug: 正准备加载 "+e)}function k(e){return(e||"").replace(l,"")}function E(e){return/^(?:[a-z]+:)?\/\//i.test(String(e))}function A(e,t){return"1"[0]?e[t]:e.getAttribute(t,4)}function _(){var t;try{a.b.c()}catch(r){t=r.stack,!t&&e.opera&&(t=(String(r).match(/of linked script \S+/g)||[]).join(" "))}if(t)return t=t.split(/[@ ]/g).pop(),t="("===t[0]?t.slice(1,-1):t.replace(/\s/,""),k(t.replace(/(:\d+)?:\d+$/i,""));for(var l,n=i.getElementsByTagName("script"),o=n.length;l=n[--o];)if(l.className===c&&"interactive"===l.readyState){var s=A(l,"src");return l.className=k(s)}}function O(t,r,a){var n=Object(ti[t]);n.state=4;for(var l,i=0,o=[];l=r[i++];)if("exports"===l){var c=n.exports||(n.exports={});o.push(c)}else o.push(ti[l].exports);try{var f=a.apply(e,o)}catch(u){s("执行["+t+"]模块的factory抛错： ",u)}return void 0!==f&&(n.exports=f),S.test(t)&&delete ti[t],delete n.factory,f}function M(e){0===e.indexOf(this.res+"!")&&(e=e.slice(this.res.length+1));var t=e,r=0,a=this.baseUrl,n=this.parentUrl||a;P(e,at.paths,function(e,a){t=t.replace(a,e),r=1}),r||P(e,at.packages,function(e,r,a){t=t.replace(a.name,a.location)}),this.mapUrl&&P(this.mapUrl,at.map,function(e){P(t,e,function(e,r){t=t.replace(r,e),n=a})});var i=this.ext;i&&r&&t.slice(-i.length)===i&&(t=t.slice(0,-i.length)),E(t)||(n=this.built||/^\w/.test(t)?a:n,t=B(n,t));var o=t+i;return t=o+this.query,o=t.replace(l,function(e){return this.query=e,""}),P(e,at.urlArgs,function(e){t+=(-1===t.indexOf("?")?"?":"&")+e}),this.url=t,this.urlNoQuery=o}function j(e,t,r){var a=H(e,t,r);return a.sort(F),a}function L(e){return new RegExp("^"+e+"(/|$)")}function D(t){return function(){var r;return t.init&&(r=t.init.apply(e,arguments)),r||t.exports&&q(t.exports)}}function H(e,t,r){var a=[];for(var n in e)if(m.call(e,n)){var i={name:n,val:e[n]};a.push(i),i.reg="*"===n&&t?/^/:L(n),r&&"*"!==n&&(i.reg=new RegExp("/"+n.replace(/^\//,"")+"(/|$)"))}return a}function P(e,t,r){t=t||[];for(var n,a=0;n=t[a++];)if(n.reg.test(e))return r(n.val,n.name,n),!1}function F(e,t){var r=e.name,a=t.name;return"*"===a?-1:"*"===r?1:a.length-r.length}function B(e,t){if("/"!==e.charAt(e.length-1)&&(e+="/"),"./"===t.slice(0,2))return e+t.slice(2);if(".."===t.slice(0,2)){for(e+=t;R.test(e);)e=e.replace(R,"");return e}return"/"===t.slice(0,1)?e+t.slice(1):e+t}function q(t){if(!t)return t;var r=e;return t.split(".").forEach(function(e){r=r[e]}),r}var t=[],r=[],o=/\.js$/i,l=/(\?[^#]*)$/,v=[],p=!1;ni=avalon.require=function(e,r,a,n){if(p){Array.isArray(e)||avalon.error("require方法的第一个参数应为数组 "+e);var s=[],c={},d=a||"callback"+setTimeout("1");n=n||{},n.baseUrl=at.baseUrl;var h=!!n.built;if(a&&(n.parentUrl=a.substr(0,a.lastIndexOf("/")),n.mapUrl=a.replace(o,"")),h){var m=f(n.defineName,n);d=m.urlNoQuery}else e.forEach(function(e){var t=f(e,n),r=u(t);r&&(c[r]||(s.push(r),c[r]="司徒正美"))});var g=ti[d];g&&4===g.state||(ti[d]={id:d,deps:h?e.concat():s,factory:r||T,state:3}),g||t.push(d),$()}else if(v.push(avalon.slice(arguments)),arguments.length<=2){p=!0;for(var l,i=v.splice(0,v.length);l=i.shift();)ni.apply(null,l)}},ni.define=function(e,t,a){"string"!=typeof e&&(a=t,t=e,e="anonymous"),Array.isArray(t)||(a=t,t=[]);var n={built:!p,defineName:e},i=[t,a,n];a.require=function(e){if(i.splice(2,0,e),ti[e]){ti[e].state=3;var t=!1;try{t=b(ti[e].deps,e)}catch(r){}t&&avalon.error(e+"模块与之前的模块存在循环依赖，请不要直接用script标签引入"+e+"模块")}delete a.require,ni.apply(null,i)};var o=n.built?"unknown":_();if(o){var l=ti[o];l&&(l.state=2),a.require(o)}else r.push(a)},ni.config=at,ni.define.amd=ti;var d=at["orig.paths"]={},h=at["orig.map"]={},g=at.packages=[],y=at["orig.args"]={};avalon.mix(ut,{paths:function(e){avalon.mix(d,e),at.paths=j(d)},map:function(e){avalon.mix(h,e);var t=j(h,1,1);avalon.each(t,function(e,t){t.val=j(t.val)}),at.map=t},packages:function(e){e=e.concat(g);for(var n,t={},r=[],a=0;n=e[a++];){n="string"==typeof n?{name:n}:n;var i=n.name;if(!t[i]){var l=B(n.location||i,n.main||"main");l=l.replace(o,""),r.push(n),t[i]=n.location=l,n.reg=L(i)}}at.packages=r.sort()},urlArgs:function(e){"string"==typeof e&&(e={"*":e}),avalon.mix(y,e),at.urlArgs=j(y,1)},baseUrl:function(e){if(!E(e)){var t=i.getElementsByTagName("base")[0];t&&i.removeChild(t);var r=n.createElement("a");r.href=e,e=A(r,"href"),t&&i.insertBefore(t,i.firstChild)}e.length>3&&(at.baseUrl=e)},shim:function(e){for(var t in e){var r=e[t];Array.isArray(r)&&(r=e[t]={deps:r}),r.exportsFn||!r.exports&&!r.init||(r.exportsFn=D(r))}at.shim=e}});var w=/complete|loaded/,N=ni.plugins={domReady:{load:T},js:{load:function(e,t,r){var a=t.url,n=t.urlNoQuery,i=at.shim[e.replace(o,"")];i?ni(i.deps||[],function(){var e=avalon.slice(arguments);C(a,n,function(){r(i.exportsFn?i.exportsFn.apply(0,e):void 0)})}):C(a,n)}},css:{load:function(e,t,r){var a=t.url,o=n.createElement("link");o.rel="stylesheet",o.href=a,i.insertBefore(o,i.firstChild),s("debug: 已成功加载 "+a),r()}},text:{load:function(e,t,r){var a=t.url,n=En();n.onreadystatechange=function(){if(4===n.readyState){var e=n.status;e>399&&600>e?avalon.error(a+" 对应资源不存在或没有开启 CORS"):(s("debug: 已成功加载 "+a),r(n.responseText))}};var i="_="+(new Date-0),o=-1===a.indexOf("?")?a+"?"+i:a+"&"+i;n.open("GET",o,!0),"withCredentials"in n&&(n.withCredentials=!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),s("debug: 正准备加载 "+a)}}};ni.checkDeps=$;var S=/^callback\d+$/,R=/\/\w+\/\.\./,I=n.scripts[n.scripts.length-1],V=I.getAttribute("data-main");if(V){ut.baseUrl(V);var U=at.baseUrl;at.baseUrl=U.slice(0,U.lastIndexOf("/")+1),C(U.replace(o,"")+".js")}else{var z=k(A(I,"src"));at.baseUrl=z.slice(0,z.lastIndexOf("/")+1)}};var oi,ii=[],li=function(e){oi=!0;var t=avalon.require;for(t&&t.checkDeps&&(ti["domReady!"].state=4,t.checkDeps());e=ii.shift();)e(avalon)};if("complete"===n.readyState)setTimeout(li);else if(x)n.addEventListener("DOMContentLoaded",li);else{n.attachEvent("onreadystatechange",function(){"complete"===n.readyState&&li()});try{var ci=null===e.frameElement}catch($t){}$.doScroll&&ci&&e.external&&si()}avalon.bind(e,"load",li),avalon.ready=function(e){oi?e(avalon):ii.push(e)},avalon.config({loader:!0}),avalon.ready(function(){avalon.scan(n.body)}),"function"==typeof define&&define.amd&&define("avalon",[],function(){return avalon});var fi=e.avalon;return avalon.noConflict=function(t){return t&&e.avalon===avalon&&(e.avalon=fi),avalon},void 0===t&&(e.avalon=avalon),avalon});